:original_name: deh_02_0022.html

.. _deh_02_0022:

Querying ECSs on a DeH
======================

Function
--------

This API is used to query information about deployed ECSs on a DeH.

URI
---

GET /v1.0/{project_id}/dedicated-hosts/{dedicated_host_id}/servers

:ref:`Table 1 <deh_02_0022__table572214121015>` describes the parameters.

.. _deh_02_0022__table572214121015:

.. table:: **Table 1** Parameters description

   +-------------------+-----------------+-----------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Parameter         | Type            | Mandatory       | Description                                                                                                                                                         |
   +===================+=================+=================+=====================================================================================================================================================================+
   | project_id        | String          | Yes             | Specifies the project ID.                                                                                                                                           |
   |                   |                 |                 |                                                                                                                                                                     |
   |                   |                 |                 | For details about how to obtain the project ID, see `Obtaining Required Information <https://docs.otc.t-systems.com/en-us/api/apiug/apig-en-api-180328009.html>`__. |
   +-------------------+-----------------+-----------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | dedicated_host_id | String          | Yes             | Specifies the DeH ID.                                                                                                                                               |
   |                   |                 |                 |                                                                                                                                                                     |
   |                   |                 |                 | You can obtain the DeH ID from the DeH console or using the :ref:`Querying DeHs <deh_02_0020>` API.                                                                 |
   +-------------------+-----------------+-----------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------+

Request
-------

-  Request parameters

   .. table:: **Table 2** Request parameters

      +-----------+-------+--------+-----------+----------------------------------------------------------------------------------------------------------------------------+
      | Parameter | In    | Type   | Mandatory | Description                                                                                                                |
      +===========+=======+========+===========+============================================================================================================================+
      | limit     | query | String | No        | Specifies the number of records displayed per page.                                                                        |
      +-----------+-------+--------+-----------+----------------------------------------------------------------------------------------------------------------------------+
      | marker    | query | String | No        | Specifies the ID of the last record on the previous page. If the **marker** value is invalid, status code 400 is returned. |
      +-----------+-------+--------+-----------+----------------------------------------------------------------------------------------------------------------------------+

-  Example request

   .. code-block:: text

      GET https://{Endpoint}/v1.0/9c53a566cb3443ab910cf0daebca90c4/dedicated-hosts/ab910cf0daebca90c4001/servers

Response
--------

-  Response parameters

   .. table:: **Table 3** Response parameters

      +-----------+------+------------------+-------------------------------------------------------------------------------------------------+
      | Parameter | In   | Type             | Description                                                                                     |
      +===========+======+==================+=================================================================================================+
      | servers   | body | Array of objects | Specifies the server object. For details, see :ref:`Table 4 <deh_02_0022__table1296218281715>`. |
      +-----------+------+------------------+-------------------------------------------------------------------------------------------------+

   .. _deh_02_0022__table1296218281715:

   .. table:: **Table 4** **servers** field description

      +-----------------------+------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Parameter             | Type                   | Description                                                                                                                                                                                                                                                              |
      +=======================+========================+==========================================================================================================================================================================================================================================================================+
      | addresses             | Object (string:array)  | Specifies the network attribute of the ECS.                                                                                                                                                                                                                              |
      |                       |                        |                                                                                                                                                                                                                                                                          |
      |                       |                        | For details, see the **addresses** field description.                                                                                                                                                                                                                    |
      +-----------------------+------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | created               | String                 | Specifies the time when the ECS was created.                                                                                                                                                                                                                             |
      +-----------------------+------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | flavor                | Object (string:string) | Specifies the ECS flavor.                                                                                                                                                                                                                                                |
      +-----------------------+------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | id                    | String                 | Specifies the ECS ID in UUID format.                                                                                                                                                                                                                                     |
      +-----------------------+------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | name                  | String                 | Specifies the ECS name.                                                                                                                                                                                                                                                  |
      +-----------------------+------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | status                | String                 | Specifies the ECS status.                                                                                                                                                                                                                                                |
      |                       |                        |                                                                                                                                                                                                                                                                          |
      |                       |                        | Options:                                                                                                                                                                                                                                                                 |
      |                       |                        |                                                                                                                                                                                                                                                                          |
      |                       |                        | **ACTIVE**, **BUILD**, **DELETED**, **ERROR**, **HARD_REBOOT**, **MIGRATING**, **PASSWORD**, **PAUSED**, **REBOOT**, **REBUILD**, **RESIZE**, **REVERT_RESIZE**, **SHUTOFF**, **SHELVED**, **SHELVED_OFFLOADED**, **SOFT_DELETED**, **SUSPENDED**, and **VERIFY_RESIZE** |
      +-----------------------+------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | tenant_id             | String                 | Specifies the ECS tenant ID in UUID format.                                                                                                                                                                                                                              |
      +-----------------------+------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | updated               | String                 | Specifies the time when the ECS was updated last time.                                                                                                                                                                                                                   |
      +-----------------------+------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | user_id               | String                 | Specifies the ID of the user who has created the ECS. The value is in UUID format.                                                                                                                                                                                       |
      +-----------------------+------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | task_state            | String                 | Specifies the ECS task status.                                                                                                                                                                                                                                           |
      +-----------------------+------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | image                 | Object (string:string) | Specifies the ECS image.                                                                                                                                                                                                                                                 |
      +-----------------------+------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | metadata              | Object (string:string) | Specifies the ECS metadata.                                                                                                                                                                                                                                              |
      +-----------------------+------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

-  Example response

   .. code-block::

      {
          "servers": [
              {
                  "addresses": {
                      "68269e6e-4a27-441b-8029-35373ad50bd9": [
                          {
                              "addr": "192.168.0.3",
                              "version": 4
                          }
                      ]
                  },
                  "created": "2012-09-07T16:56:37Z",
                  "flavor": {
                      "id": "1"
                  },
                  "id": "05184ba3-00ba-4fbc-b7a2-03b62b884931",
                  "metadata": {
                      "os_type": "Linux"
                  },
                  "name": "new-server-test",
                  "status": "ACTIVE",
                  "tenant_id": "openstack",
                  "updated": "2012-09-07T16:56:37Z",
                  "user_id": "fake",
                  "task_state": "",
                  "image": {
                      "id": "1ce5800a-e487-4c1b-b264-3353a39e2b4b"
                  }
              }
          ]
      }

Status Code
-----------

See :ref:`Status Codes <deh_02_0016>`.
